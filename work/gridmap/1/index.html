<!doctype html>
<head>
  <title>GridMap</title>
<style>
body { font-family: "Open Sans"; }

.state rect {
  fill: #dedede;
}

.state circle {
  fill: #dedede;
}

.state path {
  fill: #dedede;
}

.state text {
  font: 12px sans-serif;
  text-anchor: middle;
}

.state_selected rect {
  fill: #9f4a6c;
}

.state_selected circle {
  fill: #9f4a6c;
}
.state_selected path {
  fill: #9f4a6c;
}

.state_selected text {
  fill: white;
}

.overlay {
  fill: none;
  pointer-events: all;
}

</style>
<script src="js/lib/d3.js" charset="utf-8"></script>
<script src="js/lib/hexbin.js" charset="utf-8"></script>
<script src="js/lib/superformula.js" charset="utf-8"></script>
<script src='js/gridmap.js'></script>
</head>
<body>

<div id="shape">Shapes:
<input type='button' value="Circle" id='btn_circle'>
<input type='button' value="Rectangle" id='btn_rect'>
<input type='button' value="Hexagon" id='btn_hex'>
<input type='button' value="Pentagon" id='btn_pentagon'>
<input type='button' value="Gear" id='btn_gear'>
<input type='button' value="Triangle" id='btn_triangle'>
<input type='button' value="Diamond" id='btn_diamond'>
<input type='button' value="Heart" id='btn_heart'>
<input type='button' value="Star" id='btn_start'>

<span style='margin-left: 60px'>Supports <strong>zooming</strong> and <strong>panning</strong>!</span>
<span><a href="../2/index.html" target="_blank"> Compare to typical thematic map?</a></span>
</div>
<div id="layout" style="margin-top: 10px;">Layouts:
<input type='button' value="WGS84" id='btn_wgs841'>
<!-- <input type='button' value="WGS84_2" id='btn_wgs842'> -->
<input type='button' value="Albers USA" id='btn_albersusa'>
</div>
<div id="more" style="margin-top: 10px;">
  Want to see Multi-Resolution Grid Map (grid-CA/Redlands/...)? That is a future work!
</div>
<div id="plot"></div>

<script>

var albersusaGrid = {
"ME" : { "state": "ME", "row": 0, "col": 10 },
"WI" : { "state": "WI", "row": 1, "col": 5 },
"VT" : { "state": "VT", "row": 1, "col": 9 },
"NH" : { "state": "NH", "row": 1, "col": 10 },
"WA" : { "state": "WA", "row": 2, "col": 0 },
"ID" : { "state": "ID", "row": 2, "col": 1 },
"MT" : { "state": "MT", "row": 2, "col": 2 },
"ND" : { "state": "ND", "row": 2, "col": 3 },
"MN" : { "state": "MN", "row": 2, "col": 4 },
"IL" : { "state": "IL", "row": 2, "col": 5 },
"MI" : { "state": "MI", "row": 2, "col": 6 },
"NY" : { "state": "NY", "row": 2, "col": 8 },
"MA" : { "state": "MA", "row": 2, "col": 9 },
"OR" : { "state": "OR", "row": 3, "col": 0 },
"NV" : { "state": "NV", "row": 3, "col": 1 },
"WY" : { "state": "WY", "row": 3, "col": 2 },
"SD" : { "state": "SD", "row": 3, "col": 3 },
"IA" : { "state": "IA", "row": 3, "col": 4 },
"IN" : { "state": "IN", "row": 3, "col": 5 },
"OH" : { "state": "OH", "row": 3, "col": 6 },
"PA" : { "state": "PA", "row": 3, "col": 7 },
"NJ" : { "state": "NJ", "row": 3, "col": 8 },
"CT" : { "state": "CT", "row": 3, "col": 9 },
"RI" : { "state": "RI", "row": 3, "col": 10 },
"CA" : { "state": "CA", "row": 4, "col": 0 },
"UT" : { "state": "UT", "row": 4, "col": 1 },
"CO" : { "state": "CO", "row": 4, "col": 2 },
"NE" : { "state": "NE", "row": 4, "col": 3 },
"MO" : { "state": "MO", "row": 4, "col": 4 },
"KY" : { "state": "KY", "row": 4, "col": 5 },
"WV" : { "state": "WV", "row": 4, "col": 6 },
"VA" : { "state": "VA", "row": 4, "col": 7 },
"MD" : { "state": "MD", "row": 4, "col": 8 },
"DE" : { "state": "DE", "row": 4, "col": 9 },
"AZ" : { "state": "AZ", "row": 5, "col": 1 },
"NM" : { "state": "NM", "row": 5, "col": 2 },
"KS" : { "state": "KS", "row": 5, "col": 3 },
"AR" : { "state": "AR", "row": 5, "col": 4 },
"TN" : { "state": "TN", "row": 5, "col": 5 },
"NC" : { "state": "NC", "row": 5, "col": 6 },
"SC" : { "state": "SC", "row": 5, "col": 7 },
"OK" : { "state": "OK", "row": 6, "col": 3 },
"LA" : { "state": "LA", "row": 6, "col": 4 },
"MS" : { "state": "MS", "row": 6, "col": 5 },
"AL" : { "state": "AL", "row": 6, "col": 6 },
"GA" : { "state": "GA", "row": 6, "col": 7 },
"HI" : { "state": "HI", "row": 7, "col": 0 },
"AK" : { "state": "AK", "row": 7, "col": 1 },
"TX" : { "state": "TX", "row": 7, "col": 3 },
"FL" : { "state": "FL", "row": 7, "col": 8 }
};

var wgs84Grid1 = {"AL":{"state":"AL","row":6,"col":7},"AK":{"state":"AK","row":1,"col":0},"AZ":{"state":"AZ","row":5,"col":2},"AR":{"state":"AR","row":5,"col":5},"CA":{"state":"CA","row":4,"col":1},"CO":{"state":"CO","row":4,"col":3},"CT":{"state":"CT","row":3,"col":10},"DE":{"state":"DE","row":4,"col":10},"FL":{"state":"FL","row":7,"col":9},"GA":{"state":"GA","row":6,"col":8},"HI":{"state":"HI","row":6,"col":0},"ID":{"state":"ID","row":2,"col":2},"IL":{"state":"IL","row":3,"col":6},"IN":{"state":"IN","row":4,"col":6},"IA":{"state":"IA","row":3,"col":5},"KS":{"state":"KS","row":5,"col":4},"KY":{"state":"KY","row":5,"col":6},"LA":{"state":"LA","row":6,"col":5},"ME":{"state":"ME","row":0,"col":11},"MD":{"state":"MD","row":4,"col":9},"MA":{"state":"MA","row":2,"col":10},"MI":{"state":"MI","row":2,"col":7},"MN":{"state":"MN","row":2,"col":5},"MS":{"state":"MS","row":6,"col":6},"MO":{"state":"MO","row":4,"col":5},"MT":{"state":"MT","row":2,"col":3},"NE":{"state":"NE","row":4,"col":4},"NV":{"state":"NV","row":4,"col":2},"NH":{"state":"NH","row":1,"col":11},"NJ":{"state":"NJ","row":3,"col":9},"NM":{"state":"NM","row":5,"col":3},"NY":{"state":"NY","row":2,"col":9},"NC":{"state":"NC","row":5,"col":9},"ND":{"state":"ND","row":2,"col":4},"OH":{"state":"OH","row":3,"col":7},"OK":{"state":"OK","row":6,"col":4},"OR":{"state":"OR","row":3,"col":1},"PA":{"state":"PA","row":3,"col":8},"RI":{"state":"RI","row":2,"col":11},"SC":{"state":"SC","row":5,"col":8},"SD":{"state":"SD","row":3,"col":4},"TN":{"state":"TN","row":5,"col":7},"TX":{"state":"TX","row":7,"col":4},"UT":{"state":"UT","row":3,"col":2},"VT":{"state":"VT","row":1,"col":10},"VA":{"state":"VA","row":4,"col":8},"WA":{"state":"WA","row":2,"col":1},"WV":{"state":"WV","row":4,"col":7},"WI":{"state":"WI","row":2,"col":6},"WY":{"state":"WY","row":3,"col":3}};

var wgs84Grid2 = {
"ME" : { "state": "ME", "row": 0, "col": 11 },
"AK" : { "state": "AK", "row": 1, "col": 0 },
"VT" : { "state": "VT", "row": 1, "col": 9 },
"NH" : { "state": "NH", "row": 1, "col": 10 },
"MA" : { "state": "MA", "row": 1, "col": 11 },
"WA" : { "state": "WA", "row": 2, "col": 1 },
"MT" : { "state": "MT", "row": 2, "col": 2 },
"ND" : { "state": "ND", "row": 2, "col": 3 },
"SD" : { "state": "SD", "row": 2, "col": 4 },
"MN" : { "state": "MN", "row": 2, "col": 5 },
"WI" : { "state": "WI", "row": 2, "col": 6 },
"MI" : { "state": "MI", "row": 2, "col": 7 },
"NY" : { "state": "NY", "row": 2, "col": 9 },
"CT" : { "state": "CT", "row": 2, "col": 10 },
"RI" : { "state": "RI", "row": 2, "col": 11 },
"OR" : { "state": "OR", "row": 3, "col": 1 },
"ID" : { "state": "ID", "row": 3, "col": 2 },
"WY" : { "state": "WY", "row": 3, "col": 3 },
"NE" : { "state": "NE", "row": 3, "col": 4 },
"IA" : { "state": "IA", "row": 3, "col": 5 },
"IL" : { "state": "IL", "row": 3, "col": 6 },
"IN" : { "state": "IN", "row": 3, "col": 7 },
"OH" : { "state": "OH", "row": 3, "col": 8 },
"PA" : { "state": "PA", "row": 3, "col": 9 },
"NJ" : { "state": "NJ", "row": 3, "col": 10 },
"CA" : { "state": "CA", "row": 4, "col": 0 },
"NV" : { "state": "NV", "row": 4, "col": 1 },
"UT" : { "state": "UT", "row": 4, "col": 2 },
"CO" : { "state": "CO", "row": 4, "col": 3 },
"KS" : { "state": "KS", "row": 4, "col": 4 },
"MO" : { "state": "MO", "row": 4, "col": 5 },
"KY" : { "state": "KY", "row": 4, "col": 6 },
"WV" : { "state": "WV", "row": 4, "col": 7 },
"DC" : { "state": "DC", "row": 4, "col": 8 },
"MD" : { "state": "MD", "row": 4, "col": 9 },
"DE" : { "state": "DE", "row": 4, "col": 10 },
"AZ" : { "state": "AZ", "row": 5, "col": 2 },
"NM" : { "state": "NM", "row": 5, "col": 3 },
"OK" : { "state": "OK", "row": 5, "col": 4 },
"AR" : { "state": "AR", "row": 5, "col": 5 },
"TN" : { "state": "TN", "row": 5, "col": 6 },
"VA" : { "state": "VA", "row": 5, "col": 7 },
"NC" : { "state": "NC", "row": 5, "col": 8 },
"HI" : { "state": "HI", "row": 6, "col": 0 },
"TX" : { "state": "TX", "row": 6, "col": 3 },
"LA" : { "state": "LA", "row": 6, "col": 4 },
"MS" : { "state": "MS", "row": 6, "col": 5 },
"AL" : { "state": "AL", "row": 6, "col": 6 },
"GA" : { "state": "GA", "row": 6, "col": 7 },
"SC" : { "state": "SC", "row": 6, "col": 8 },
"FL" : { "state": "FL", "row": 7, "col": 7 }
};



var stateGrid = wgs84Grid1; //albersusaGrid, wgs84Grid1, wgs84Grid2

var selectedStates = {};
var stateIDs = Object.keys(stateGrid);
stateIDs.forEach(function(s) {
	selectedStates[s] = s.startsWith("M");
});

var options = {
  containerSelector: '#plot',
  cellShape: 'rect', // circle, rect, hexagon, gear, heart, pentagon, star, triangle, diamond
  cellSize: 60, //40 for circle and rect, 20 for others
  gap: 28, // 8 for circle and rect, 26 for others
  selectedStates: selectedStates

}

var gridmap = new GridMap(stateGrid, options);

d3.select('#shape').selectAll('input').on('click', function(){
  var newShape = d3.select(this).attr('value').toLowerCase();
  if(newShape == 'rectangle' || newShape == 'circle'){
    gridmap.changeShape(newShape, 60, 20)
  } else {
    gridmap.changeShape(newShape, 32, 60)
  }
})

d3.select('#layout').selectAll('input').on('click', function(){
  var newLayoutName = d3.select(this).attr('value').toLowerCase();


  var newLayoutData;
  if(newLayoutName == 'wgs84'){

    newLayoutData = wgs84Grid1
  } else if(newLayoutName == 'wgs84_2') {

    newLayoutData = wgs84Grid2
  } else{

    newLayoutData = albersusaGrid
  };

  gridmap.changeLayout(newLayoutData)

})

</script>

<!-- Start of StatCounter Code for Default Guide -->
    <script type="text/javascript">
    var sc_project=10227952; 
    var sc_invisible=1; 
    var sc_security="19025bec"; 
    var sc_https=1; 
    var scJsHost = (("https:" == document.location.protocol) ?
    "https://secure." : "http://www.");
    document.write("<sc"+"ript type='text/javascript' async src='" + scJsHost+ 
    "statcounter.com/counter/counter_xhtml.js'></"+"script>"); 
    </script> 
    <noscript><div class='statcounter'><a class='statcounter' href='http://statcounter.com/free-web-stats/' title='web stats'><img alt='web stats' class='statcounter' src='http://c.statcounter.com/10227952/0/19025bec/1/'/></a></div></noscript> 
<!-- End of StatCounter Code for Default Guide -->
</body>
</html>
