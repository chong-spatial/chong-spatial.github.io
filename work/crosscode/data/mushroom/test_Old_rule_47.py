

if __name__ == "__main__":
    rules_list = [{"index": 0, "support": 0.3173, "risk": 3651.09, "text": "Odds Ratio:3651.09;cap_surface=FIBROUS stalk_shape=TAPERING "}, {"index": 1, "support": 0.3957, "risk": 5144.64, "text": "Odds Ratio:5144.64;spore_print_color=BROWN gill_size=BROAD "}, {"index": 2, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;gill_size=BROAD gill_spacing=CROWDED "}, {"index": 3, "support": 0.6132, "risk": 12453.8, "text": "Odds Ratio:12453.8;odor=NONE stalk_shape=TAPERING "}, {"index": 4, "support": 0.3066, "risk": 3473.6, "text": "Odds Ratio:3473.6;spore_print_color=BLACK stalk_shape=TAPERING "}, {"index": 5, "support": 0.287, "risk": 3162.04, "text": "Odds Ratio:3162.04;cap_color=GRAY odor=NONE "}, {"index": 6, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;gill_spacing=CROWDED habitat=GRASSES "}, {"index": 7, "support": 0.3173, "risk": 3651.09, "text": "Odds Ratio:3651.09;odor=NONE spore_print_color=BLACK "}, {"index": 8, "support": 0.385, "risk": 4918.54, "text": "Odds Ratio:4918.54;spore_print_color=BLACK gill_size=BROAD "}, {"index": 9, "support": 0.4064, "risk": 5378.88, "text": "Odds Ratio:5378.88;bruises=BRUISES habitat=WOODS "}, {"index": 10, "support": 0.328, "risk": 3834.23, "text": "Odds Ratio:3834.23;odor=NONE spore_print_color=BROWN "}, {"index": 11, "support": 0.3173, "risk": 3651.09, "text": "Odds Ratio:3651.09;spore_print_color=BROWN stalk_shape=TAPERING "}, {"index": 12, "support": 0.385, "risk": 4918.54, "text": "Odds Ratio:4918.54;gill_size=BROAD stalk_surface_below_ring=SMOOTH habitat=WOODS "}, {"index": 13, "support": 0.385, "risk": 4918.54, "text": "Odds Ratio:4918.54;stalk_surface_above_ring=SMOOTH gill_size=BROAD habitat=WOODS "}, {"index": 14, "support": 0.4064, "risk": 5378.88, "text": "Odds Ratio:5378.88;stalk_root=BULBOUS stalk_shape=TAPERING habitat=WOODS "}, {"index": 15, "support": 0.385, "risk": 4918.54, "text": "Odds Ratio:4918.54;gill_size=BROAD stalk_shape=TAPERING habitat=WOODS "}, {"index": 16, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;stalk_color_above_ring=WHITE gill_size=BROAD bruises=NO "}, {"index": 17, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;bruises=NO stalk_color_below_ring=WHITE habitat=GRASSES "}, {"index": 18, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;stalk_color_above_ring=WHITE bruises=NO habitat=GRASSES "}, {"index": 19, "support": 0.4064, "risk": 5378.88, "text": "Odds Ratio:5378.88;ring_type=PENDANT stalk_shape=TAPERING habitat=WOODS "}, {"index": 20, "support": 0.2923, "risk": 3245.3, "text": "Odds Ratio:3245.3;gill_size=BROAD bruises=NO stalk_color_below_ring=WHITE "}, {"index": 21, "support": 0.3868, "risk": 4955.67, "text": "Odds Ratio:4955.67;gill_size=BROAD ring_type=PENDANT habitat=WOODS "}, {"index": 22, "support": -0.5499, "risk": -10966.2, "text": "Odds Ratio:10966.2;odor=FOUL "}, {"index": 23, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;ring_type=LARGE "}, {"index": 24, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;gill_color=BUFF "}, {"index": 25, "support": -0.3849, "risk": -5617.43, "text": "Odds Ratio:5617.43;population=SEVERAL stalk_surface_below_ring=SILKY "}, {"index": 26, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;bruises=NO stalk_color_below_ring=PINK "}, {"index": 27, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;stalk_root=BULBOUS stalk_surface_above_ring=SILKY "}, {"index": 28, "support": -0.2912, "risk": -3688.41, "text": "Odds Ratio:3688.41;stalk_surface_above_ring=SILKY cap_surface=SCALY "}, {"index": 29, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;stalk_color_above_ring=PINK bruises=NO "}, {"index": 30, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;stalk_root=BULBOUS stalk_surface_below_ring=SILKY "}, {"index": 31, "support": -0.5499, "risk": -10966.2, "text": "Odds Ratio:10966.2;ring_number=ONE stalk_surface_below_ring=SILKY "}, {"index": 32, "support": -0.558, "risk": -11333.8, "text": "Odds Ratio:11333.8;stalk_surface_above_ring=SILKY ring_number=ONE "}, {"index": 33, "support": -0.5499, "risk": -10966.2, "text": "Odds Ratio:10966.2;gill_spacing=CLOSE stalk_surface_below_ring=SILKY "}, {"index": 34, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;spore_print_color=WHITE stalk_shape=TAPERING "}, {"index": 35, "support": -0.2749, "risk": -3403.82, "text": "Odds Ratio:3403.82;cap_surface=SCALY stalk_surface_below_ring=SILKY "}, {"index": 36, "support": -0.3931, "risk": -5813.32, "text": "Odds Ratio:5813.32;stalk_surface_above_ring=SILKY population=SEVERAL "}, {"index": 37, "support": -0.5703, "risk": -11911.3, "text": "Odds Ratio:11911.3;gill_spacing=CLOSE stalk_surface_above_ring=SILKY "}, {"index": 38, "support": -0.4481, "risk": -7286.79, "text": "Odds Ratio:7286.79;gill_spacing=CLOSE bruises=NO ring_type=EVANESCENT "}, {"index": 39, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;gill_size=NARROW bruises=NO stalk_shape=TAPERING "}, {"index": 40, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;gill_spacing=CLOSE ring_type=EVANESCENT stalk_shape=TAPERING "}, {"index": 41, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;gill_spacing=CLOSE gill_size=NARROW stalk_shape=TAPERING "}, {"index": 42, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;gill_spacing=CLOSE bruises=NO stalk_shape=TAPERING "}, {"index": 43, "support": -0.2933, "risk": -3724.91, "text": "Odds Ratio:3724.91;cap_surface=SMOOTH stalk_shape=TAPERING gill_spacing=CLOSE "}, {"index": 44, "support": -0.4481, "risk": -7286.79, "text": "Odds Ratio:7286.79;ring_number=ONE gill_spacing=CLOSE ring_type=EVANESCENT "}, {"index": 45, "support": -0.4399, "risk": -7050.24, "text": "Odds Ratio:7050.24;bruises=NO stalk_shape=TAPERING population=SEVERAL "}, {"index": 46, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;ring_number=ONE veil_color=WHITE stalk_shape=ENLARGING gill_size=BROAD bruises=NO "}, {"index": 47, "support": -0.3299, "risk": -4419.79, "text": "Odds Ratio:4419.79;gill_attachment=FREE ring_number=ONE stalk_shape=ENLARGING gill_size=BROAD bruises=NO "}]
    attrVals ={"veil-type": ["p"], "stalk-surface-below-ring": ["y", "f", "s", "k"], "stalk-color-below-ring": ["y", "n", "g", "c", "w", "b", "p"], "spore-print-color": ["h", "n", "w", "r", "k", "u"], "gill-attachment": ["f", "a"], "ring-type": ["n", "p", "e", "l"], "stalk-color-above-ring": ["y", "n", "g", "c", "w", "b", "p"], "population": ["s", "y", "v", "n", "c", "a"], "cap-shape": ["s", "x", "f", "c", "b", "k"], "cap-surface": ["y", "f", "g", "s"], "gill-size": ["n", "b"], "gill-color": ["h", "y", "n", "g", "w", "b", "o", "r", "k", "p", "e", "u"], "odor": ["l", "s", "y", "n", "f", "m", "c", "a", "p"], "gill-spacing": ["c", "w"], "stalk-root": ["r", "c", "e", "b"], "habitat": ["l", "m", "g", "d", "p", "u"], "cap-color": ["y", "n", "g", "c", "w", "b", "r", "p", "e", "u"], "ring-number": ["o", "n", "t"], "veil-color": ["y", "w"], "bruises": ["f", "t"], "stalk-surface-above-ring": ["k", "f", "y", "s"], "stalk-shape": ["ecls", "t", "e", "tcls"]}
    attrMap = {"veil-type": "A", "stalk-surface-below-ring": "B", "stalk-color-below-ring": "C", "spore-print-color": "D", "gill-attachment": "E", "ring-type": "F", "stalk-color-above-ring": "G", "population": "H", "cap-shape": "I", "cap-surface": "J", "gill-size": "K", "gill-color": "L", "odor": "M", "gill-spacing": "N", "stalk-root": "O", "habitat": "P", "cap-color": "Q", "ring-number": "R", "veil-color": "S", "bruises": "T", "stalk-surface-above-ring": "U", "stalk-shape": "V"}

    newRules = []
    for r in rules_list:
        newR = {}
        newR['m'] = [[0,0], r['support'], r['risk']]
        newR['id'] = r['index']
        newR['cls'] = 'cls2' if r['risk'] > 0 else 'cls1'
        text = r['text']
        itemsets = text.split(';')[1].split(' ')
        compressed_r = []
        for i in itemsets:
                r_attr_val = i.split('=')
                compressed_r.append(attrMap[r_attr_val[0]] + "=" + str(attrVals[r_attr_val[0]].index(r_attr_val[1].replace('\n', '')) ))
          
        
        newR['it'] = compressed_r
        newRules.append(newR)
    print(newRules)
